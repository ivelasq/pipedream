<!DOCTYPE HTML>

<html>
    <head>
        <script type="application/ld+json">
    {
        "@context" : "http://schema.org",
        "@type" : "BlogPosting",
        "mainEntityOfPage": {
             "@type": "WebPage",
             "@id": "/"
        },
        "articleSection" : "blog",
        "name" : "Transforming PDF&#39;s into Useful Tables",
        "headline" : "Transforming PDF&#39;s into Useful Tables",
        "description" : "Extracting SNAP Expenditures Data",
        "inLanguage" : "en",
        "author" : "",
        "creator" : "",
        "publisher": "",
        "accountablePerson" : "",
        "copyrightHolder" : "",
        "copyrightYear" : "2018",
        "datePublished": "2018-12-16 00:00:00 &#43;0000 UTC",
        "dateModified" : "2018-12-16 00:00:00 &#43;0000 UTC",
        "url" : "/blog/snap-expenditures/",
        "wordCount" : "1242",
        "keywords" : [ "tidyverse","tabulizer","purrr","broom","Blog" ]
    }
    </script>
        
            
                <title>Transforming PDF&#39;s into Useful Tables</title>
            
        

        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta name="generator" content="Hugo 0.49.1" />
        
  
    
  

  

  <link rel="apple-touch-icon-precomposed" href='/favicon/apple-touch-icon-precomposed.png'>
  <link rel="icon" href='/favicon/favicon.png'>
  
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="msapplication-TileImage" content='/favicon/mstile.png'>
  <meta name="application-name" content="%&gt;% dreams">
  <meta name="msapplication-tooltip" content="Isabella Velásquez Personal Site on R and Analytics">
  <meta name="msapplication-config" content='/favicon/ieconfig.xml'>



        
        
            <meta name="description" content="Extracting SNAP Expenditures Data">
        

        <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Transforming PDF&#39;s into Useful Tables"/>
<meta name="twitter:description" content="Extracting SNAP Expenditures Data"/>
<meta name="twitter:site" content="@ivelasq3"/>

        <meta property="og:title" content="Transforming PDF&#39;s into Useful Tables" />
<meta property="og:description" content="Extracting SNAP Expenditures Data" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/blog/snap-expenditures/" /><meta property="article:published_time" content="2018-12-16T00:00:00&#43;00:00"/>
<meta property="article:modified_time" content="2018-12-16T00:00:00&#43;00:00"/>

        <meta property="og:image" content="//images/logo.png">
        <meta property="og:image:type" content="image/png">
        <meta property="og:image:width" content="512">
        <meta property="og:image:height" content="512">
        
<meta itemprop="name" content="Transforming PDF&#39;s into Useful Tables">
<meta itemprop="description" content="Extracting SNAP Expenditures Data">


<meta itemprop="datePublished" content="2018-12-16T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2018-12-16T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="1242">



<meta itemprop="keywords" content="tidyverse,tabulizer,purrr,broom," />

        

        
            
        

        
        
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css">
            <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway:400,800,900|Source+Sans+Pro:400,700">
            <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.1.25/jquery.fancybox.min.css">
            <link rel="stylesheet" href="/css/main.css">
            <link rel="stylesheet" href="/css/add-on.css">
            <link rel="stylesheet" href="/css/academicons.min.css">
        

        
            
                
            
        


  
    
    <link href='//cdn.bootcss.com/highlight.js/9.11.0/styles/github.min.css' rel='stylesheet' type='text/css' />
  


      
    </head>
    <body>

      
      <div id="wrapper">

    
    
<header id="header">
    
      <h1><a href="/">blog</a></h1>
    

    <nav class="links">
        <ul>
            
                <li>
                    <a href="/">
                            <i class="fa fa-home">&nbsp;</i>Home
                    </a>
                </li>
            
                <li>
                    <a href="/about/">
                            <i class="fa fa-id-card-o">&nbsp;</i>About
                    </a>
                </li>
            
                <li>
                    <a href="/blog/">
                            <i class="fa fa-newspaper-o">&nbsp;</i>Blog
                    </a>
                </li>
            
                <li>
                    <a href="/itemized/">
                            <i class="fa fa-list">&nbsp;</i>Itemized
                    </a>
                </li>
            
                <li>
                    <a href="/categories/">
                            <i class="fa fa-sitemap">&nbsp;</i>Categories
                    </a>
                </li>
            
                <li>
                    <a href="/contact/">
                            <i class="fa fa-envelope-o">&nbsp;</i>Contact
                    </a>
                </li>
            
        </ul>
    </nav>
    <nav class="main">
        <ul>
            
            <li id="share-nav" class="share-menu" style="display:none;">
                <a class="fa-share-alt" href="#share-menu">Share</a>
            </li>
            
            <li class="search">
                <a class="fa-search" href="#search">Search</a>
                <form id="search" method="get" action="//google.com/search">
                    <input type="text" name="q" placeholder="Search" />
                    <input type="hidden" name="as_sitesearch" value="/">
                </form>
            </li>
            <li class="menu">
                <a class="fa-bars" href="#menu">Menu</a>
            </li>
        </ul>
    </nav>
</header>


<section id="menu">

    
        <section>
            <form class="search" method="get" action="//google.com/search">
                <input type="text" name="q" placeholder="Search" />
                <input type="hidden" name="as_sitesearch" value="/">
            </form>
        </section>

    
        <section>
            <ul class="links">
                
                    <li>
                        <a href="/">
                            <h3>
                                <i class="fa fa-home">&nbsp;</i>Home
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="/about/">
                            <h3>
                                <i class="fa fa-id-card-o">&nbsp;</i>About
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="/blog/">
                            <h3>
                                <i class="fa fa-newspaper-o">&nbsp;</i>Blog
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="/itemized/">
                            <h3>
                                <i class="fa fa-list">&nbsp;</i>Itemized
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="/categories/">
                            <h3>
                                <i class="fa fa-sitemap">&nbsp;</i>Categories
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="/contact/">
                            <h3>
                                <i class="fa fa-envelope-o">&nbsp;</i>Contact
                            </h3>
                        </a>
                    </li>
                
            </ul>
        </section>

    
        <section class="recent-posts">
            <div class="mini-posts">
                <header>
                    <h3>Recent Posts</h3>
                </header>
                

                
                    
                

                
                        <article class="mini-post">
                            <header>
                                <h3><a href="/blog/things-i-google/">Six Things I Always Google When Using ggplot2</a></h3>
                                
                                <time class="published" datetime=
                                    '2020-01-27'>
                                    January 27, 2020</time>
                            </header>
                            
    

    
        
        







  
  
    
  


        
        
        

        <a href="/blog/things-i-google/" class="image featured">
            <img src="/img/2020/01/ggplot2.png" alt="">
        </a>
    


                        </article>
                
                        <article class="mini-post">
                            <header>
                                <h3><a href="/blog/modal-district/">Finding the Modal School District</a></h3>
                                
                                <time class="published" datetime=
                                    '2019-09-11'>
                                    September 11, 2019</time>
                            </header>
                            
    

    
        
        







  
  
    
  


        
        
        

        <a href="/blog/modal-district/" class="image featured">
            <img src="/img/2019/09/modal.png" alt="">
        </a>
    


                        </article>
                
                        <article class="mini-post">
                            <header>
                                <h3><a href="/blog/average-hike/">Taking A Peek into My Hiking Data</a></h3>
                                
                                <time class="published" datetime=
                                    '2019-04-06'>
                                    April 6, 2019</time>
                            </header>
                            
    

    
        
        







  
  
    
  


        
        
        

        <a href="/blog/average-hike/" class="image featured">
            <img src="/img/2019/04/hiking.png" alt="">
        </a>
    


                        </article>
                
                        <article class="mini-post">
                            <header>
                                <h3><a href="/blog/snap-expenditures/">Transforming PDF&#39;s into Useful Tables</a></h3>
                                
                                <time class="published" datetime=
                                    '2018-12-16'>
                                    December 16, 2018</time>
                            </header>
                            
    

    
        
        







  
  
    
  


        
        
        

        <a href="/blog/snap-expenditures/" class="image featured">
            <img src="/img/2018/12/snap.png" alt="">
        </a>
    


                        </article>
                
                        <article class="mini-post">
                            <header>
                                <h3><a href="/blog/why-disaggregate-data/">Disaggregating Minneapolis Public Schools Data</a></h3>
                                
                                <time class="published" datetime=
                                    '2018-09-21'>
                                    September 21, 2018</time>
                            </header>
                            
    

    
        
        







  
  
    
  


        
        
        

        <a href="/blog/why-disaggregate-data/" class="image featured">
            <img src="/img/2018/09/school.png" alt="">
        </a>
    


                        </article>
                

                
                    <a href=
                        
                            /blog/
                        
                        class="button">View more posts</a>
                
            </div>
        </section>

    
        
</section>

    <section id="share-menu">
    <section id="social-share-nav">
        <ul class="links">
            <header>
                <h3>Share this post <i class="fa fa-smile-o"></i></h3>
            </header>
            



<li>
  <a href="//twitter.com/share?url=%2fblog%2fsnap-expenditures%2f&amp;text=Transforming%20PDF%27s%20into%20Useful%20Tables&amp;via=ivelasq3" target="_blank" class="share-btn twitter">
    <i class="fa fa-twitter"></i>
    <p>Twitter</p>
    </a>
</li>








<li>
  <a href="//www.facebook.com/sharer/sharer.php?u=%2fblog%2fsnap-expenditures%2f" target="_blank" class="share-btn facebook">
    <i class="fa fa-facebook"></i>
    <p>Facebook</p>
    </a>
</li>







<li>
  <a href="//www.linkedin.com/shareArticle?url=%2fblog%2fsnap-expenditures%2f&amp;title=Transforming%20PDF%27s%20into%20Useful%20Tables" target="_blank" class="share-btn linkedin">
      <i class="fa fa-linkedin"></i>
      <p>LinkedIn</p>
    </a>
</li>










<li>
  <a href="mailto:?subject=Check out this post by &amp;body=%2fblog%2fsnap-expenditures%2f" target="_blank" class="share-btn email">
    <i class="fa fa-envelope"></i>
    <p>Email</p>
  </a>
</li>


        </ul>
    </section>
</section>

    
    <div id="main">
        
        
        <article class="post">
  <header>
    <div class="title">
        
            <h1><a href="/blog/snap-expenditures/">Transforming PDF&#39;s into Useful Tables</a></h1>
            
        
        
            <p>Extracting SNAP Expenditures Data</p>
        
    </div>
    <div class="meta">
        

        <time class="published"
            datetime='2018-12-16'>
            December 16, 2018</time>
        <span class="author"></span>
        
            <p>6 minute read</p>
        
        
    </div>
</header>


  
    <section id="social-share">
      <ul class="icons">
        



<li>
  <a href="//twitter.com/share?url=%2fblog%2fsnap-expenditures%2f&amp;text=Transforming%20PDF%27s%20into%20Useful%20Tables&amp;via=ivelasq3" target="_blank" class="share-btn twitter">
    <i class="fa fa-twitter"></i>
    <p>Twitter</p>
    </a>
</li>








<li>
  <a href="//www.facebook.com/sharer/sharer.php?u=%2fblog%2fsnap-expenditures%2f" target="_blank" class="share-btn facebook">
    <i class="fa fa-facebook"></i>
    <p>Facebook</p>
    </a>
</li>







<li>
  <a href="//www.linkedin.com/shareArticle?url=%2fblog%2fsnap-expenditures%2f&amp;title=Transforming%20PDF%27s%20into%20Useful%20Tables" target="_blank" class="share-btn linkedin">
      <i class="fa fa-linkedin"></i>
      <p>LinkedIn</p>
    </a>
</li>










<li>
  <a href="mailto:?subject=Check out this post by &amp;body=%2fblog%2fsnap-expenditures%2f" target="_blank" class="share-btn email">
    <i class="fa fa-envelope"></i>
    <p>Email</p>
  </a>
</li>


      </ul>
    </section>
  

  
    

    
        
        







  
  
    
  


        
        
        

        <a href="/blog/snap-expenditures/" class="image featured">
            <img src="/img/2018/12/snap.png" alt="">
        </a>
    


  <div id="content">
    <p>Way back in 2016, the USDA released a <a href="https://www.fns.usda.gov/snap/foods-typically-purchased-supplemental-nutrition-assistance-program-snap-households">study</a> entitled “Foods Typically Purchased by Supplemental Nutrition Assistance Program (SNAP) Households,” including a summary, final report, and appendices. Per the USDA’s description:</p>
<blockquote>
<p>This study uses calendar year 2011 point-of-sale transaction data from a leading grocery retailer to examine the food choices of SNAP and non-SNAP households.</p>
</blockquote>
<p>At the time though, I was most interested in looking at the <a href="https://fns-prod.azureedge.net/sites/default/files/ops/SNAPFoodsTypicallyPurchased-Appendices.pdf">appendices data</a> - <em>263</em> pages full of tables detailing the commodities and categories of food bought by both families served and not served by SNAP. Unfortunately, these wonderful data are in PDF format, with ‘fancy’ Excel formatting (merged cells, unnecessary column names), where the formatting varies depending on which appendix you are looking at.</p>
<p>I <a href="mailto:SNAPHQ-WEB@fns.usda.gov">emailed</a> SNAP HQ to ask if they had the raw data available in CSV’s and was told simply:</p>
<blockquote>
<p>Thank you for your inquiry. Unfortunately we do not have the data tables in a CSV file.</p>
</blockquote>
<p>At the time, my R skills were pretty rudimentary and I couldn’t figure out how to easily and efficiently pull the data into usable tables. Two years later and with a little more experience with R and scraping and cleaning ugly files, I decided to try again using the wonderful <code>tidyverse</code> and <code>tabulizer</code> package.</p>
<pre class="r"><code>library(tidyverse)
library(tabulizer)
library(broom)</code></pre>
<p>Use <code>tabulizer::extract_tables()</code> to extract the data from the <a href="https://fns-prod.azureedge.net/sites/default/files/ops/SNAPFoodsTypicallyPurchased-Appendices.pdf">appendices PDF</a>. Once you extract the tables, you are left with a list (slightly more manageable than the original PDFs).</p>
<pre class="r"><code>snap_pdf &lt;-
  extract_tables(&quot;https://fns-prod.azureedge.net/sites/default/files/ops/SNAPFoodsTypicallyPurchased-Appendices.pdf&quot;)</code></pre>
<p>Using the <code>purrr</code> package, create a data frame from the lists while simultaneously removing the unnecessary rows.</p>
<pre class="r"><code>snap_df &lt;- 
  snap_pdf %&gt;%
  map(as_tibble) %&gt;%
  map_df(~ slice(., -2)) # slicing because of the unnecessary rows
  
head(snap_df)</code></pre>
<pre><code>## # A tibble: 6 x 9
##   V1        V2    V3                    V4    V5    V6    V7    V8    V9   
##   &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;                 &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
## 1 &quot;&quot;        &quot;&quot;    &quot;SNAP Household Expe~ &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt; 
## 2 Soft dri~ &quot;&quot;    1 $357.7 5.44% 2 $1,~ &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt; 
## 3 Fluid mi~ &quot;&quot;    2 $253.7 3.85% 1 $1,~ &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt; 
## 4 Beef:gri~ &quot;&quot;    3 $201.0 3.05% 6 $62~ &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt; 
## 5 Bag snac~ &quot;&quot;    4 $199.3 3.03% 5 $79~ &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt; 
## 6 Cheese    &quot;&quot;    5 $186.4 2.83% 3 $94~ &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;</code></pre>
<p>Due to the original formatting of the PDFs, there’s a bunch of cleaning to be done to make the list into a usable table. Using <code>slice()</code>, I choose only the rows from Appendix 1. I manually put in the number of entries (238) because I didn’t know how to calculate this using code. If you have ideas, let me know!</p>
<pre class="r"><code>snap_appendix1 &lt;-
  snap_df %&gt;% 
  slice(1:238) # Appendix A has 238 rows</code></pre>
<p>Now comes the fun part (yay data cleaning!). When looking at the data frame, the data for each commodity are all mushed together in two separate columns (V2 and V3), but only one column or the other. Then there are a bunch of empty columns (V4 through V9), probably created from the funky original formatting. The data all begin with numbers as well. First things first - put all the data in a single column. Then, remove all the empty rows in the newly created <code>col_dat</code> column.</p>
<pre class="r"><code>snap_appendix1_cleaned &lt;-
  snap_appendix1 %&gt;%
  mutate(col_dat = case_when(grepl(&quot;[0-9]&quot;, V2) ~ V2, # create a column that contains all the data
                           grepl(&quot;[0-9]&quot;, V3) ~ V3,
                           TRUE ~ &quot;&quot;)) %&gt;% 
  filter(col_dat != &quot;&quot;) # some rows are empty

head(snap_appendix1_cleaned)</code></pre>
<pre><code>## # A tibble: 6 x 10
##   V1       V2    V3         V4    V5    V6    V7    V8    V9    col_dat    
##   &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;      
## 1 Soft dr~ &quot;&quot;    1 $357.7 ~ &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  1 $357.7 5~
## 2 Fluid m~ &quot;&quot;    2 $253.7 ~ &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  2 $253.7 3~
## 3 Beef:gr~ &quot;&quot;    3 $201.0 ~ &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  3 $201.0 3~
## 4 Bag sna~ &quot;&quot;    4 $199.3 ~ &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  4 $199.3 3~
## 5 Cheese   &quot;&quot;    5 $186.4 ~ &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  5 $186.4 2~
## 6 Baked b~ &quot;&quot;    6 $163.7 ~ &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  6 $163.7 2~</code></pre>
<p>Now the numeric data we want is wonderfully in a single column, so we can select the columns <code>V1</code> and <code>col_dat</code>.</p>
<pre class="r"><code>snap_appendix1_cleaned &lt;-
  snap_appendix1_cleaned %&gt;% 
  select(V1, col_dat)

head(snap_appendix1_cleaned)</code></pre>
<pre><code>## # A tibble: 6 x 2
##   V1                  col_dat                        
##   &lt;chr&gt;               &lt;chr&gt;                          
## 1 Soft drinks         1 $357.7 5.44% 2 $1,263.3 4.01%
## 2 Fluid milk products 2 $253.7 3.85% 1 $1,270.3 4.03%
## 3 Beef:grinds         3 $201.0 3.05% 6 $621.1 1.97%  
## 4 Bag snacks          4 $199.3 3.03% 5 $793.9 2.52%  
## 5 Cheese              5 $186.4 2.83% 3 $948.9 3.01%  
## 6 Baked breads        6 $163.7 2.49% 4 $874.8 2.78%</code></pre>
<p>All the numeric data is still mushed in column <code>col_dat</code>, so using <code>tidyr::separate()</code> we can split the values because they are all separated by spaces. Referencing the original PDF, we descriptively rename the columns (and rename the commodity column <code>V1</code> as well). The numeric values have retained their original formatting, with dollar signs and commas and percentage signs, oh my! We can sub out those unnecessary characters and transform those columns into truly numeric values.</p>
<pre class="r"><code>snap_appendix1_cleaned &lt;-
  snap_appendix1_cleaned %&gt;%
  separate(col_dat, &quot; &quot;,
           into = c(&quot;snap_rank&quot;, &quot;snap_dollars_in_millions&quot;, &quot;snap_pct_total_expenditures&quot;, &quot;nonsnap_rank&quot;, &quot;nonsnap_dollars_in_millions&quot;, &quot;nonsnap_pct_total_expenditures&quot;)) %&gt;%
  rename(commodity = V1) %&gt;%
  mutate_at(vars(snap_rank:nonsnap_pct_total_expenditures), list(~ as.numeric(gsub(&quot;,|%|\\$&quot;, &quot;&quot;, .))))

head(snap_appendix1_cleaned)</code></pre>
<pre><code>## # A tibble: 6 x 7
##   commodity snap_rank snap_dollars_in~ snap_pct_total_~ nonsnap_rank
##   &lt;chr&gt;         &lt;dbl&gt;            &lt;dbl&gt;            &lt;dbl&gt;        &lt;dbl&gt;
## 1 Soft dri~         1             358.             5.44            2
## 2 Fluid mi~         2             254.             3.85            1
## 3 Beef:gri~         3             201              3.05            6
## 4 Bag snac~         4             199.             3.03            5
## 5 Cheese            5             186.             2.83            3
## 6 Baked br~         6             164.             2.49            4
## # ... with 2 more variables: nonsnap_dollars_in_millions &lt;dbl&gt;,
## #   nonsnap_pct_total_expenditures &lt;dbl&gt;</code></pre>
<p>Last but not least, we convert all the columns with percentages into actual percentages by dividing by 100.</p>
<pre class="r"><code>snap_appendix1_cleaned &lt;-
  snap_appendix1_cleaned %&gt;%
  mutate_at(vars(contains(&quot;pct&quot;)), list(~ ./100))

head(snap_appendix1_cleaned)</code></pre>
<pre><code>## # A tibble: 6 x 7
##   commodity snap_rank snap_dollars_in~ snap_pct_total_~ nonsnap_rank
##   &lt;chr&gt;         &lt;dbl&gt;            &lt;dbl&gt;            &lt;dbl&gt;        &lt;dbl&gt;
## 1 Soft dri~         1             358.           0.0544            2
## 2 Fluid mi~         2             254.           0.0385            1
## 3 Beef:gri~         3             201            0.0305            6
## 4 Bag snac~         4             199.           0.0303            5
## 5 Cheese            5             186.           0.0283            3
## 6 Baked br~         6             164.           0.0249            4
## # ... with 2 more variables: nonsnap_dollars_in_millions &lt;dbl&gt;,
## #   nonsnap_pct_total_expenditures &lt;dbl&gt;</code></pre>
<p>Tada! Now we have a clean dataset from the original not-very-usable PDFs.</p>
<p>Another goal is to at some point do a full analysis of what these data show. My hope is that now some of it is available, others can create and share amazing analysis with it. For the purposes of this blogpost, here are some quick ggplots comparing the rank of commodities between families served by SNAP and those who are not.</p>
<pre class="r"><code>snap_appendix1_cleaned %&gt;% # quick correlation plot
 ggplot(aes(x = snap_rank, y = nonsnap_rank)) +
 geom_point()</code></pre>
<p><img src="/blog/snap-expenditures_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<pre class="r"><code>snap_lm &lt;- lm(snap_rank ~ nonsnap_rank, data = snap_appendix1_cleaned)
snap_res &lt;- augment(snap_lm)

snap_res %&gt;% # quick residual plot
  ggplot(aes(x = .fitted, y = .resid)) +
  geom_point()</code></pre>
<p><img src="/blog/snap-expenditures_files/figure-html/unnamed-chunk-9-2.png" width="672" /></p>
<p>I’d love to collaborate with others to finish up this project and find efficiencies. The repo with the code and final dataset is <a href="https://github.com/ivelasq/snap">here</a>. More to come!</p>

  </div>

  <footer>
    <ul class="stats">
  <li class="categories">
    <ul>
        
            
            
                <i class="fa fa-folder"></i>
                
                
                <li><a class="article-category-link" href="/categories/r">R</a></li>
                
            
        
    </ul>
  </li>
  <li class="tags">
    <ul>
        
            
            
                <i class="fa fa-tags"></i>
                
                
                <li><a class="article-category-link" href="/tags/tidyverse">tidyverse</a></li>
                
                
                <li><a class="article-category-link" href="/tags/tabulizer">tabulizer</a></li>
                
                
                <li><a class="article-category-link" href="/tags/purrr">purrr</a></li>
                
                
                <li><a class="article-category-link" href="/tags/broom">broom</a></li>
                
            
        
    </ul>
  </li>
</ul>

  </footer>

</article>


<ul class="actions pagination">
    
        <li><a href="/blog/why-disaggregate-data/"
                class="button big previous">Disaggregating Minneapolis Public Schools Data</a></li>
    

    
        <li><a href="/blog/average-hike/"
                class="button big next">Taking A Peek into My Hiking Data</a></li>
    
</ul>


    </div>
    
<section id="sidebar">

  
  <section id="intro">
    
    
      
        <a href='/' class="logo"><img src="https://avatars1.githubusercontent.com/u/12236152?s=460&amp;v=4" alt="Isabella Velásquez" /></a>
      
    
    
      <header>
        <h2>Isabella Velásquez</h2>
        <p>%>% dreams</p>
      </header>
    
    
      <ul class="icons">
        
          
    <li><a href="/index.xml" type="application/rss+xml" target="_blank" title="RSS" class="fa fa-rss"></a></li>


        
        
  <li><a href="//github.com/ivelasq" target="_blank" title="GitHub" class="fa fa-github"></a></li>

























  <li><a href="//linkedin.com/in/ivelasq" target="_blank" title="LinkedIn" class="fa fa-linkedin"></a></li>



































  <li><a href="//twitter.com/ivelasq3" target="_blank" title="Twitter" class="fa fa-twitter"></a></li>



















  <li><a href="mailto:ivelasq@gmail.com" title="Email" class="fa fa-envelope"></a></li>


      </ul>
    
  </section>

  
  <section class="recent-posts">
    <div class="mini-posts">
      <header>
        <h3>Recent Posts</h3>
      </header>
      <div class="posts-container">
        

        
          
        

        
          <article class="mini-post">
            <header>
              <h3>
                <a href="/blog/things-i-google/">Six Things I Always Google When Using ggplot2</a>
              </h3>
              
              <time class="published" datetime='2020-01-27'>
                January 27, 2020
              </time>
            </header>
            
    

    
        
        







  
  
    
  


        
        
        

        <a href="/blog/things-i-google/" class="image featured">
            <img src="/img/2020/01/ggplot2.png" alt="">
        </a>
    


          </article>
        
          <article class="mini-post">
            <header>
              <h3>
                <a href="/blog/modal-district/">Finding the Modal School District</a>
              </h3>
              
              <time class="published" datetime='2019-09-11'>
                September 11, 2019
              </time>
            </header>
            
    

    
        
        







  
  
    
  


        
        
        

        <a href="/blog/modal-district/" class="image featured">
            <img src="/img/2019/09/modal.png" alt="">
        </a>
    


          </article>
        
          <article class="mini-post">
            <header>
              <h3>
                <a href="/blog/average-hike/">Taking A Peek into My Hiking Data</a>
              </h3>
              
              <time class="published" datetime='2019-04-06'>
                April 6, 2019
              </time>
            </header>
            
    

    
        
        







  
  
    
  


        
        
        

        <a href="/blog/average-hike/" class="image featured">
            <img src="/img/2019/04/hiking.png" alt="">
        </a>
    


          </article>
        
          <article class="mini-post">
            <header>
              <h3>
                <a href="/blog/snap-expenditures/">Transforming PDF&#39;s into Useful Tables</a>
              </h3>
              
              <time class="published" datetime='2018-12-16'>
                December 16, 2018
              </time>
            </header>
            
    

    
        
        







  
  
    
  


        
        
        

        <a href="/blog/snap-expenditures/" class="image featured">
            <img src="/img/2018/12/snap.png" alt="">
        </a>
    


          </article>
        
          <article class="mini-post">
            <header>
              <h3>
                <a href="/blog/why-disaggregate-data/">Disaggregating Minneapolis Public Schools Data</a>
              </h3>
              
              <time class="published" datetime='2018-09-21'>
                September 21, 2018
              </time>
            </header>
            
    

    
        
        







  
  
    
  


        
        
        

        <a href="/blog/why-disaggregate-data/" class="image featured">
            <img src="/img/2018/09/school.png" alt="">
        </a>
    


          </article>
        
      </div>

      
        <a href=
          
            /blog/
          
        class="button">View more posts</a>
      
    </div>
  </section>

  
  
  
  
  
    <section id="categories">
      <header>
        <h3>
          <a href="/categories/">Categories</a>
        </h3>
      </header>
        
          
        

        
        <p>
          <article>
            <header>
              
                <a href="/categories/r/">R</a>
                <span style="float:right;">7</span>
              
            </header>
          </article>
        </p>
        
        <p>
          <article>
            <header>
              
                <a href="/categories/general/">general</a>
                <span style="float:right;">1</span>
              
            </header>
          </article>
        </p>
        
    </section>
  
  

  
  
    <section id="mini-bio">
      <h3>About</h3>
      <p>This is my personal website. Nothing here is endorsed by my employer or any organizations of which I am a part. Content on this site is provided under a Creative Commons (CC-BY) 4.0 license. You may re-use this content as long as you indicate my authorship and provide a link back to the original material. Source code of the site is provided under the MIT license and may be reused without restriction. Many thanks to Dr. Noam Ross for the language included here!</p>
      <a href="/about/" class="button">Learn More</a>
    </section>
  

  
  <section id="footer">
    
      <ul class="icons">
        
          
    <li><a href="/index.xml" type="application/rss+xml" target="_blank" title="RSS" class="fa fa-rss"></a></li>


        
        
  <li><a href="//github.com/ivelasq" target="_blank" title="GitHub" class="fa fa-github"></a></li>

























  <li><a href="//linkedin.com/in/ivelasq" target="_blank" title="LinkedIn" class="fa fa-linkedin"></a></li>



































  <li><a href="//twitter.com/ivelasq3" target="_blank" title="Twitter" class="fa fa-twitter"></a></li>



















  <li><a href="mailto:ivelasq@gmail.com" title="Email" class="fa fa-envelope"></a></li>


      </ul>
    
    <p class="copyright">
      
        &copy; 2020
        
          %&gt;% dreams
        
      .
      Powered by <a href="//gohugo.io" target="_blank">Hugo</a>
    </p>
  </section>
</section>

    </div>
    <a id="back-to-top" href="#" class="fa fa-arrow-up fa-border fa-2x"></a>
    

    
      
    

    
      
      
      
        <script src="//cdn.bootcss.com/highlight.js/9.11.0/highlight.min.js"></script>
        
        
        
        <script src="//cdn.bootcss.com/highlight.js/9.11.0/languages/r.min.js"></script>
        <script src="//cdn.bootcss.com/highlight.js/9.11.0/languages/yaml.min.js"></script>
        <script src="//cdn.bootcss.com/highlight.js/9.11.0/languages/css.min.js"></script>
        <script>hljs.configure({languages: []}); hljs.initHighlightingOnLoad();</script>
      
    
    
    
      <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/skel/3.0.1/skel.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.1.25/jquery.fancybox.min.js"></script>
      <script src="/js/util.js"></script>
      <script src="/js/main.js"></script>
      <script src="/js/backToTop.js"></script>
    

    
      
        
      
    

    
    <script>hljs.initHighlightingOnLoad();</script>
      <script src="//yihui.name/js/math-code.js"></script>
<script async
src="//cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
</script>


  </body>
</html>

